var TaskRerunList = function () {
    var e = $(this), t = function () {
        e.types = [{id: -1, text: "全部"}, {id: 1, text: "每天自动运行"}, {id: 2, text: "手动调起重跑"}, {
            id: 3,
            text: "单独运行一个Job"
        }, {id: 4, text: "通过调度Api触发"}, {id: 5, text: "时间段重跑"}], $("#type").select2({
            minimumResultsForSearch: -1,
            language: {
                noResults: function () {
                    return "无搜索结果"
                }
            },
            placeholder: "选择Job类型",
            data: e.types
        }).on("change", function (t) {
            e.type = $(this).val(), e.oTable.ajax.reload()
        }), $("#type").val(-1).trigger('change')
    }, a = function () {
        e.statuses = [{id: -1, text: "全部"}, {id: 0, text: "Task待提交"}, {
            id: 1,
            text: "Task已提交"
        }], $("#status").select2({
            minimumResultsForSearch: -1, language: {
                noResults: function () {
                    return "无搜索结果"
                }
            }, placeholder: "选择调度状态", data: e.statuses
        }).on("change", function (t) {
            e.status = $(this).val(), e.oTable.ajax.reload()
        }), $("#status").val(-1).trigger('change')
    }, s = function () {
        e.userList = new Array, e.userList.push({
            id: -1,
            text: "全部"
        }), $.post(e.contextPath + "/user/api/list-user", function (t, a) {
            _.each(t.userList, function (t) {
                return e.userId == t.id ? void e.userList.push({
                    id: t.id,
                    text: t.trueName + "-" + t.userName,
                    selected: !0
                }) : void e.userList.push({id: t.id, text: t.trueName + "-" + t.userName, selected: !1})
            }), $("#selUser").select2({
                language: {
                    noResults: function () {
                        return "无搜索结果"
                    }
                }, placeholder: "选择用户", data: e.userList
            }).on("change", function (t) {
                e.userId = $(this).val(), e.oTable.ajax.reload()
            }), $("#selUser").val(e.userId).trigger('change')
        })
    }, n = function () {
        var t = $("#dataTable");
        e.oTable = t.DataTable({
            bProcessing: !0,
            language: {
                emptyTable: "无结果",
                lengthMenu: "每页&nbsp; _MENU_ &nbsp;项",
                search: "查找：",
                processing: "正在加载...",
                info: "显示 _START_ 到 _END_ 共 _TOTAL_ 条记录"
            },
            info: !0,
            ordering: !1,
            paging: !0,
            lengthMenu: [10, 25, 50, 100],
            searching: !1,
            serverSide: !0,
            pageLength: 10,
            ajax: {
                url: e.contextPath + "/scheduler/task-rerun/api/list", type: "POST", data: function (t) {
                    t.columns = null, t.search = null, t["searchForm.type"] = e.type, t["searchForm.status"] = e.status, t["searchForm.userId"] = e.userId
                }, dataSrc: function (e) {
                    return e.data
                }
            },
            fnDrawCallback: function (e, t) {
            },
            columns: [{data: "id"}, {
                data: null, render: function (e, t, a, s) {
                    var n = "";
                    return n = 1 == e.type ? "<span class='label bg-green'>每天自动运行</span>" : 2 == e.type ? "<span class='label bg-blue-madison'>手动调起重跑</span>" : 3 == e.type ? "<span class='label bg-blue-steel'>单独运行一个Job</span>" : 4 == e.type ? "<span class='label bg-blue'>通过调度Api触发</span>" : 5 == e.type ? "<span class='label bg-blue'>时间段重跑</span>" : "<span class='label bg-grey'>其它</span>"
                }
            }, {
                data: null, render: function (t, a, s, n) {
                    var l = t.name;
                    return l && l.length > 50 && (l = l.substring(0, 50) + "..."), '<a target="_blank" href="' + e.contextPath + "/scheduler/task-rerun/detail?id=" + t.id + '" title="' + t.name + '">' + l + "</a>"
                }
            }, {
                data: null, render: function (e, t, a, s) {
                    var n = "";
                    return n = 0 == e.status ? "<span class='label bg-yellow'>Task待提交</span>" : 1 == e.status ? "<span class='label bg-green'>Task已提交</span>" : "<span class='label bg-grey'>其它</span>"
                }
            }, {data: "createTime"}, {data: "updateTime"}, {
                data: null, render: function (t, a) {
                    return 0 == t.status ? '<a href="' + e.contextPath + "/scheduler/task-rerun/detail?id=" + t.id + '" class="btn default btn-xs yellow-stripe">编辑 </a>' : 1 == t.status ? '<a href="' + e.contextPath + "/scheduler/task-rerun/detail?id=" + t.id + '" class="btn default btn-xs green-stripe">查看 </a>' : '<a href="' + e.contextPath + "/scheduler/task-rerun/detail?id=" + t.id + '" class="btn default btn-xs green-stripe">查看 </a>'
                }
            }]
        }), $("#dataTable_processing").hide();
        var a = jQuery("#dataTable_wrapper");
        a.find(".dataTables_length select").addClass("form-control input-xsmall input-inline")
    };
    return {
        init: function (l) {
            e.contextPath = l.contextPath, e.userId = l.userId, e.status = -1, e.type = -1, t(), a(), s(), n()
        }
    }
}();
//# sourceMappingURL=task-rerun-list-4793e3ce12.min.js.map
